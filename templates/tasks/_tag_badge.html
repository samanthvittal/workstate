<!-- Reusable tag badge component
     Usage: {% include 'tasks/_tag_badge.html' with tag=tag size='sm' clickable=True only %}
     Props:
     - tag: Tag model instance (required)
     - size: 'xs', 'sm', 'md' (default: 'sm')
     - clickable: boolean (default: False) - if True, makes badge a link to filter by tag

     IMPORTANT: Always use 'only' keyword to prevent context recursion
-->

{% if tag %}
    {# Determine size classes #}
    {% if size == 'xs' %}
        {% if clickable == True %}
            <a href="{% url 'tasks:task-list-all' %}?tag={{ tag.name }}"
               class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium text-white hover:opacity-80 transition-opacity"
               style="background-color: {{ tag.color }};"
               title="Filter tasks by '{{ tag.name }}' tag">
                {{ tag.name }}
            </a>
        {% else %}
            <span class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium text-white"
                  style="background-color: {{ tag.color }};">
                {{ tag.name }}
            </span>
        {% endif %}
    {% elif size == 'md' %}
        {% if clickable == True %}
            <a href="{% url 'tasks:task-list-all' %}?tag={{ tag.name }}"
               class="inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium text-white hover:opacity-80 transition-opacity"
               style="background-color: {{ tag.color }};"
               title="Filter tasks by '{{ tag.name }}' tag">
                {{ tag.name }}
            </a>
        {% else %}
            <span class="inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium text-white"
                  style="background-color: {{ tag.color }};">
                {{ tag.name }}
            </span>
        {% endif %}
    {% else %}
        {# Default: sm #}
        {% if clickable == True %}
            <a href="{% url 'tasks:task-list-all' %}?tag={{ tag.name }}"
               class="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium text-white hover:opacity-80 transition-opacity"
               style="background-color: {{ tag.color }};"
               title="Filter tasks by '{{ tag.name }}' tag">
                {{ tag.name }}
            </a>
        {% else %}
            <span class="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium text-white"
                  style="background-color: {{ tag.color }};">
                {{ tag.name }}
            </span>
        {% endif %}
    {% endif %}
{% endif %}
